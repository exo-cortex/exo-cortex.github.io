<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>hifiberry_and_mpd_on_raspberry_pi - exo-cortex: weblog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="I set up my Raspberry Pi 4 with Arch Linux 1. Having totally forgotten how to make it work with the Hifiberry DAC+ XLR audio shield I had to google, read and understand everything again. In order to avoid this hassle and not waste so much fucking time again (and hopefully help some lost souls on the internet in the process) I&rsquo;m writing everything down here.
enabling the audio-shield For the DAC2-Pro XLR in the &ldquo;/boot/config."><meta property="og:image" content><meta property="og:title" content="hifiberry_and_mpd_on_raspberry_pi"><meta property="og:description" content="I set up my Raspberry Pi 4 with Arch Linux 1. Having totally forgotten how to make it work with the Hifiberry DAC+ XLR audio shield I had to google, read and understand everything again. In order to avoid this hassle and not waste so much fucking time again (and hopefully help some lost souls on the internet in the process) I&rsquo;m writing everything down here.
enabling the audio-shield For the DAC2-Pro XLR in the &ldquo;/boot/config."><meta property="og:type" content="article"><meta property="og:url" content="https://exo-cortex.github.io/how-to/hifiberry_and_mpd_on_raspberry_pi/"><meta property="article:section" content="how-to"><meta property="article:published_time" content="2021-10-16T14:45:23+02:00"><meta property="article:modified_time" content="2021-10-16T14:45:23+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="hifiberry_and_mpd_on_raspberry_pi"><meta name=twitter:description content="I set up my Raspberry Pi 4 with Arch Linux 1. Having totally forgotten how to make it work with the Hifiberry DAC+ XLR audio shield I had to google, read and understand everything again. In order to avoid this hassle and not waste so much fucking time again (and hopefully help some lost souls on the internet in the process) I&rsquo;m writing everything down here.
enabling the audio-shield For the DAC2-Pro XLR in the &ldquo;/boot/config."><script src=https://exo-cortex.github.io/js/feather.min.js></script>
<link href=https://exo-cortex.github.io/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://exo-cortex.github.io/css/main.f354d104e4f25e1f0121dcd3bf611971d9a9e4c055e4c38c69de20042123a240.css></head><body><div class=content><header><div class=main><a href=https://exo-cortex.github.io/>exo-cortex: weblog</a></div><nav><a href=/>home</a>
<a href=/blog>blog</a>
<a href=/how-to>how-to</a>
<a href=/projects>projects</a>
<a href=/tags>tags</a>
<a href=/blogroll/blogroll>blogroll</a>
<a href=/about/about/>about</a></nav></header><main><article><div class=title><h1 class=title>hifiberry_and_mpd_on_raspberry_pi</h1><div class=meta>posted: Oct 16, 2021 updated: Jan 10, 2022</div></div><section class=body><p>I set up my Raspberry Pi 4 with Arch Linux <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>. Having totally forgotten how to make it work with the <strong>Hifiberry DAC+ XLR</strong> audio shield I had to google, read and understand everything again. In order to avoid this hassle and not waste so much fucking time again (and hopefully help some lost souls on the internet in the process) I&rsquo;m writing everything down here.</p><h2 id=enabling-the-audio-shield>enabling the audio-shield</h2><p>For the <a href=https://www.hifiberry.com/shop/boards/hifiberry-dac2-pro-xlr/>DAC2-Pro XLR</a> in the &ldquo;/boot/config.txt&rdquo; file add the following lines:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#408080;font-style:italic>#hifiberry shield DAC+ XLR</span>
</span></span><span style=display:flex><span><span style=color:#19177c>dtoverlay</span><span style=color:#666>=</span>hifiberry-dacplus
</span></span><span style=display:flex><span><span style=color:#19177c>device_tree_param</span><span style=color:#666>=</span><span style=color:#19177c>spi</span><span style=color:#666>=</span>on
</span></span></code></pre></div><p>(If you are using a different audio shield, hifiberry has a list of all the parameters <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.)</p><h2 id=allowing-your-user-access-to-the-raspberry-pis-audio-card>allowing your user access to the raspberry pi&rsquo;s audio card</h2><p>Access to the audio-card by default (at least on Arch Linux (ARM)) is allowed only to the root user. If you run any audio-related commands they will fail or return unsatisfying results. For example if you want to list all of the Raspberry Pi&rsquo;s audio devices by running the command</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aplay -l
</span></span></code></pre></div><p>It will not return the expected list of devices.</p><p>In order to make it possible for your user (the account that you are logged into) to access the audio devices we have to add the user to the group &ldquo;audio&rdquo; by running the command</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>sudo usermod -G audio -a [your username]
</span></span></code></pre></div><p>I had to restart my raspberry pi for the changes to take effect.
Now you should be able to run commands that make sound through the Hifiberry.
mpd now suddenly worked after I scratched my head for a day trying everything out.
cheers.</p><h2 id=setting-up-mpd2-as-a-system-service>setting up mpd<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> as a system service</h2><p>by setting up mpd</p><ul><li></li><li></li><li></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=archlinuxarm.org>archlinuxarm.org</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://www.hifiberry.com/docs/software/configuring-linux-3-18-x/>https://www.hifiberry.com/docs/software/configuring-linux-3-18-x/</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://en.wikipedia.org/wiki/Music_Player_Daemon>music player daemon</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/raspberry-pi>raspberry pi</a></li><li><a href=/tags/audio>audio</a></li><li><a href=/tags/hifiberry>hifiberry</a></li></ul></nav></div></article></main><footer><hr><a class=soc href=https://github.com/exo-cortex title=GitHub><i data-feather=github></i></a>|2023 <a href=https://github.com/exo-cortex/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></footer><script>feather.replace()</script></div></body></html>