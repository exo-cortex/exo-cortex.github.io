<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>ffmpeg_scripts - exo-cortex: weblog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="using ffmpeg. I use ffmpeg to convert videos from one format to the other. In order to create small video files from gifs I use this script:
#!/usr/bin/sh # two-pass video-conversion with resizing to width echo &#34;$1 >> $2 resizing to width=$3 with target video-bitrate of $4&#34; ffmpeg -y -i &#34;$1&#34; -vf scale=$3:-1 -c:v vp9 -preset quality -b:v $4 -pass 1 -an -auto-alt-ref 0 -f webm /dev/null && \ ffmpeg -i &#34;$1&#34; -vf scale=$3:-1 -c:v vp9 -preset quality -b:v $4 -pass 2 -an -auto-alt-ref 0 $2 explanation -an (no audio) -vf (video filtering -> see below) -c:v (video codec options - e."><meta property="og:image" content><meta property="og:title" content="ffmpeg_scripts"><meta property="og:description" content="using ffmpeg. I use ffmpeg to convert videos from one format to the other. In order to create small video files from gifs I use this script:
#!/usr/bin/sh # two-pass video-conversion with resizing to width echo &#34;$1 >> $2 resizing to width=$3 with target video-bitrate of $4&#34; ffmpeg -y -i &#34;$1&#34; -vf scale=$3:-1 -c:v vp9 -preset quality -b:v $4 -pass 1 -an -auto-alt-ref 0 -f webm /dev/null && \ ffmpeg -i &#34;$1&#34; -vf scale=$3:-1 -c:v vp9 -preset quality -b:v $4 -pass 2 -an -auto-alt-ref 0 $2 explanation -an (no audio) -vf (video filtering -> see below) -c:v (video codec options - e."><meta property="og:type" content="article"><meta property="og:url" content="https://exo-cortex.github.io/blog/ffmpeg_scripts/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-05-30T20:09:19+02:00"><meta property="article:modified_time" content="2021-05-30T20:09:19+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="ffmpeg_scripts"><meta name=twitter:description content="using ffmpeg. I use ffmpeg to convert videos from one format to the other. In order to create small video files from gifs I use this script:
#!/usr/bin/sh # two-pass video-conversion with resizing to width echo &#34;$1 >> $2 resizing to width=$3 with target video-bitrate of $4&#34; ffmpeg -y -i &#34;$1&#34; -vf scale=$3:-1 -c:v vp9 -preset quality -b:v $4 -pass 1 -an -auto-alt-ref 0 -f webm /dev/null && \ ffmpeg -i &#34;$1&#34; -vf scale=$3:-1 -c:v vp9 -preset quality -b:v $4 -pass 2 -an -auto-alt-ref 0 $2 explanation -an (no audio) -vf (video filtering -> see below) -c:v (video codec options - e."><script src=https://exo-cortex.github.io/js/feather.min.js></script>
<link href=https://exo-cortex.github.io/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://exo-cortex.github.io/css/main.f354d104e4f25e1f0121dcd3bf611971d9a9e4c055e4c38c69de20042123a240.css></head><body><div class=content><header><div class=main><a href=https://exo-cortex.github.io/>exo-cortex: weblog</a></div><nav><a href=/>home</a>
<a href=/blog>blog</a>
<a href=/tags>tags</a>
<a href=/blogroll/blogroll>blogroll</a>
<a href=/about/about/>about</a></nav></header><main><article><div class=title><h1 class=title>ffmpeg_scripts</h1><div class=meta>posted: May 30, 2021</div></div><section class=body><p>using ffmpeg.
I use ffmpeg to convert videos from one format to the other. In order to create small video files from gifs I use this script:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#bc7a00>#!/usr/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#bc7a00></span><span style=color:#408080;font-style:italic># two-pass video-conversion with resizing to width </span>
</span></span><span style=display:flex><span><span style=color:green>echo</span> <span style=color:#ba2121>&#34;</span><span style=color:#19177c>$1</span><span style=color:#ba2121> &gt;&gt; </span><span style=color:#19177c>$2</span><span style=color:#ba2121> resizing to width=</span><span style=color:#19177c>$3</span><span style=color:#ba2121> with target video-bitrate of </span><span style=color:#19177c>$4</span><span style=color:#ba2121>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ffmpeg -y -i <span style=color:#ba2121>&#34;</span><span style=color:#19177c>$1</span><span style=color:#ba2121>&#34;</span> -vf <span style=color:#19177c>scale</span><span style=color:#666>=</span><span style=color:#19177c>$3</span>:-1 -c:v vp9 -preset quality -b:v <span style=color:#19177c>$4</span> -pass <span style=color:#666>1</span> -an -auto-alt-ref <span style=color:#666>0</span> -f webm /dev/null <span style=color:#666>&amp;&amp;</span> <span style=color:#b62;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#b62;font-weight:700></span>ffmpeg -i <span style=color:#ba2121>&#34;</span><span style=color:#19177c>$1</span><span style=color:#ba2121>&#34;</span> -vf <span style=color:#19177c>scale</span><span style=color:#666>=</span><span style=color:#19177c>$3</span>:-1 -c:v vp9 -preset quality -b:v <span style=color:#19177c>$4</span> -pass <span style=color:#666>2</span> -an -auto-alt-ref <span style=color:#666>0</span> <span style=color:#19177c>$2</span>
</span></span></code></pre></div><h2 id=explanation>explanation</h2><ul><li>-an (no audio)</li><li>-vf (video filtering -> see below)</li><li>-c:v (video codec options - e.g. <strong>vp9</strong> or <strong>libx264</strong> )</li><li>-c:a (audio codec - e.g. <strong>vorbis</strong>)</li><li>-preset ([ultrafast, superfast, veryfast, faster, fast, medium (default), slow, slower, veryslow])</li><li>-b:v 1M (video bitrate )</li><li>-b:a (audio bitrate)</li></ul><h2 id=-some-video-filter-options>[*] some video filter options</h2><ul><li>scale=400:-1 (resize to width=400, keep aspect ratio)</li><li>scale=iw/2:-1 (resize image to 50% of input_width resolution, might stretch/squash the image)</li><li>scale=400:300 (resize image to 400x300 resolution, might stretch/squash the image)</li><li>negate (invert colors)</li></ul><h2 id=other-useful-command>other useful command:</h2><ul><li>-codecs (print out a list of all codecs available on this computer)</li></ul><hr><p>links:</p><ul><li><a href=https://ffmpeg.org/documentation.html>ffmpeg documentation</a></li><li><a href=https://trac.ffmpeg.org/wiki/Encode/VP9>vp9 guide</a></li><li><a href=https://trac.ffmpeg.org/wiki/Encode/H.264>h264 guide</a></li><li><a href=https://trac.ffmpeg.org/wiki/Encode/AV1>av1guide</a></li><li><a href=https://trac.ffmpeg.org/wiki/FilteringGuide>filtering guide</a></li><li><a href=https://write.corbpie.com/ffmpeg-list-all-codecs-encoders-decoders-and-formats/>list avaliable codecs</a></li></ul></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/bash>bash</a></li><li><a href=/tags/commandline>commandline</a></li><li><a href=/tags/ffmpeg>ffmpeg</a></li><li><a href=/tags/how-to>how-to</a></li></ul></nav></div></article></main><footer><hr><a class=soc href=https://github.com/exo-cortex title=GitHub><i data-feather=github></i></a>|2023 <a href=https://github.com/exo-cortex/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></footer><script>feather.replace()</script></div></body></html>